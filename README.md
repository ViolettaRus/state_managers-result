# Приложение «Контакты» (MobX)

Учебный проект: SPA для управления контактами с централизованным состоянием на **MobX**. Репозиторий создан для демонстрации работы с реактивным state management в React.



## Цель репозитория

- Показать **реальное приложение** с менеджером состояния (MobX), а не только примеры из документации.
- Дать возможность **запустить, проверить и оценить** код: фильтрация, избранное, загрузка данных, роутинг.
- Использовать **Conventional Commits** и линтеры коммитов (Commitlint, Husky) как образец оформления истории изменений.

---

## Решаемая задача

**Функциональное требование:** веб-приложение «Контакты», в котором:

| Требование | Реализация |
|------------|------------|
| Список контактов с фото, именем, телефоном, адресом | Страница «Все контакты», данные из `contact.json` |
| Фильтр по имени и по группе | Поиск по имени + выбор группы; состояние в `contactsFilterStore` |
| Избранные контакты, общие для всего приложения | Список ID в `favoritesStore`; синхронизация между страницами |
| Просмотр карточки контакта и его групп | Страница `/contact/:id`, ссылки на группы |
| Список групп и контакты внутри группы | Страницы «Группы» и `/group/:id`; данные из `groups.json` |
| Одна загрузка данных при старте | `contactsStore.load()` в `main.jsx`; данные не теряются при переходах |

**Проблема без глобального состояния:** дублирование данных по компонентам, повторная загрузка при навигации, рассинхрон избранного между страницами. Здесь всё решается за счёт MobX-сторов.

---

## Структура репозитория

```
state_managers-result/
├── public/                    # Статика, отдаётся как есть
│   ├── contact.json           # Данные контактов (для fetch)
│   └── groups.json            # Данные групп (для fetch)
├── src/
│   ├── main.jsx               # Точка входа: рендер App, вызов store.contacts.load()
│   ├── App.jsx                # Роутинг (React Router): маршруты и Layout
│   ├── App.css
│   │
│   ├── components/
│   │   ├── Layout.jsx         # Общий layout: шапка с навигацией, <Outlet /> для страниц
│   │   └── Layout.css
│   │
│   ├── store/                 # MobX-сторы (единый слой состояния)
│   │   ├── index.js           # Экспорт rootStore и отдельных сторов
│   │   ├── contactsStore.js   # contacts, groups, isLoading, error; load()
│   │   ├── contactsFilterStore.js  # name, groupId; setFilter()
│   │   └── favoritesStore.js  # contactIds; addToFavorites(), removeFromFavorites()
│   │
│   └── pages/                 # Страницы (все обёрнуты в observer())
│       ├── ContactsPage/      # Список контактов + фильтры + избранное
│       ├── ContactPage/       # Карточка одного контакта + избранное
│       ├── GroupsPage/        # Список групп
│       ├── GroupPage/         # Контакты одной группы
│       └── FavoritesPage/     # Только избранные контакты
│
├── index.html
├── vite.config.js
├── package.json
├── commitlint.config.cjs     # Правила сообщений коммитов (Conventional Commits)
└── .husky/commit-msg         # Хук: проверка коммита через commitlint
```

### Как взаимодействуют части

- **Сторы** — единственный источник истины: данные и флаги загрузки/ошибок живут в `contactsStore`, фильтры в `contactsFilterStore`, избранное в `favoritesStore`.
- **Страницы** — импортируют сторы из `store/` и обёрнуты в `observer()`, поэтому при изменении observable-полей только затронутые компоненты перерисовываются.
- **Данные** — при старте приложения в `main.jsx` вызывается `rootStore.contacts.load()`: параллельно запрашиваются `/contact.json` и `/groups.json`, результат кладётся в сторы.
- **Роутинг** — React Router в `App.jsx`; навигация в `Layout` ведёт на «Все контакты», «Группы», «Избранное»; дочерние маршруты рендерятся через `<Outlet />`.

---

## Как запускать и проверять

### Требования

- **Node.js** (рекомендуется LTS, например 18+).
- Менеджер пакетов **npm**.

### Установка и запуск

```bash
# Клонирование (если ещё не клонирован репозиторий)
git clone https://github.com/ViolettaRus/state_managers-result.git
cd state_managers-result

# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run dev
```

После запуска откройте в браузере адрес, который выведет Vite (обычно `http://localhost:5173`).

### Сборка для production

```bash
npm run build
```

Собранные файлы появятся в папке `dist/`. Для локальной проверки сборки:

```bash
npm run preview
```

### Что проверить вручную

1. **Загрузка** — при первом открытии отображается «Загрузка контактов…», затем список контактов.
2. **Фильтр по имени** — ввод в поле поиска сужает список по имени.
3. **Фильтр по группе** — выбор группы в выпадающем списке оставляет только контакты этой группы.
4. **Избранное** — на странице «Все контакты» или на карточке контакта нажать звёздочку (☆ → ★); перейти в «Избранное» — контакт там есть; снять звёздочку — он исчезает из избранного на всех страницах.
5. **Группы** — страница «Группы» показывает список; переход по группе открывает страницу с контактами этой группы.
6. **Навигация** — переходы по ссылкам (контакт, группа, назад) работают без перезагрузки страницы; данные не сбрасываются.

Специальных автотестов в репозитории нет; проверка — ручная по сценарию выше.

---

## Важные детали

- **Стек:** React 18, MobX 6, mobx-react-lite, React Router 6, Vite 5.
- **Данные:** используются статические JSON из `public/` (имитация API). Подмена на реальный бэкенд — замена логики в `contactsStore.load()`.
- **Коммиты:** в проекте настроены [Conventional Commits](https://www.conventionalcommits.org/) и Commitlint; сообщения коммитов должны быть вида `type: описание` (например, `feat: ...`, `fix: ...`, `docs: ...`). Хук `.husky/commit-msg` проверяет это перед записью коммита.
- **Без Redux:** изначально приложение могло быть на Redux; здесь состояние полностью вынесено в MobX-сторы, без дублирования с Redux.

---

## Кратко по сторам и действиям

| Стор | Назначение | Основные действия |
|------|------------|--------------------|
| `contactsStore` | Контакты, группы, загрузка | `load()` — загрузить контакты и группы |
| `contactsFilterStore` | Фильтры списка контактов | `setFilter({ name?, groupId? })` |
| `favoritesStore` | ID избранных контактов | `addToFavorites(id)`, `removeFromFavorites(id)` |

Ссылка на синтаксис разметки GitHub: [Basic writing and formatting syntax](https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax).
