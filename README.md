# Приложение "Контакты" с MobX

## Анализ проблем и улучшений

### Проблемы приложения без менеджера состояния:

1. **Дублирование состояния**
   - Данные контактов и групп хранятся в локальном состоянии каждого компонента
   - При переходе между страницами данные теряются и загружаются заново
   - Нет единого источника истины (Single Source of Truth)

2. **Проблемы с передачей данных (Prop Drilling)**
   - Данные передаются через множество уровней компонентов
   - Усложняется поддержка и рефакторинг кода
   - Компоненты становятся сильно связанными

3. **Отсутствие централизованного управления состоянием**
   - Невозможно отследить изменения состояния
   - Сложно отлаживать приложение
   - Нет возможности использовать DevTools для мониторинга

4. **Проблемы с синхронизацией данных**
   - Изменения в одном компоненте не отражаются в других
   - Например, добавление контакта в избранное на одной странице не обновляет другие страницы

5. **Отсутствие обработки асинхронных операций**
   - Нет единого подхода к загрузке данных с сервера
   - Каждый компонент самостоятельно управляет состоянием загрузки

6. **Сложность масштабирования**
   - При добавлении новых функций код становится все более запутанным
   - Сложно добавлять новые страницы и функциональность

### Почему стоит использовать MobX:

1. **Единый источник истины**
   - Все данные хранятся в observable-сторах
   - Легко получить доступ к данным из любого компонента

2. **Реактивность**
   - Изменения состояния автоматически обновляют только затронутые компоненты
   - Минимум boilerplate по сравнению с Redux

3. **Отладка**
   - MobX DevTools позволяют отслеживать реакции и обновления
   - Прозрачная трассировка зависимостей

4. **Масштабируемость**
   - Легко добавлять новые сторы и действия
   - Код остаётся простым и читаемым

5. **Переиспользование**
   - Логика вынесена в сторы, компоненты оборачиваются в `observer`
   - Компоненты остаются декларативными

6. **Асинхронные операции**
   - В действиях сторов можно использовать async/await и `runInAction` для обновления состояния

## Структура проекта

```
src/
├── store/
│   ├── index.js                    # Экспорт rootStore и сторов
│   ├── contactsStore.js            # Контакты, группы, загрузка данных
│   ├── contactsFilterStore.js      # Фильтры (имя, группа)
│   └── favoritesStore.js           # Избранные контакты (ID)
├── components/
│   ├── Layout.jsx                  # Компонент навигации
│   └── Layout.css
├── pages/
│   ├── ContactsPage/                # Страница всех контактов
│   ├── ContactPage/                # Страница контакта
│   ├── GroupsPage/                 # Страница всех групп
│   ├── GroupPage/                  # Страница группы
│   └── FavoritesPage/              # Страница избранного
├── App.jsx                         # Главный компонент с роутингом
├── App.css
└── main.jsx                        # Точка входа
```

## Использованные технологии

- **React** - библиотека для создания UI
- **MobX** - реактивный менеджер состояния
- **mobx-react-lite** - связка React и MobX (observer)
- **React Router** - маршрутизация
- **Vite** - сборщик проекта

## Установка и запуск

```bash
# Установка зависимостей
npm install

# Запуск dev-сервера
npm run dev

# Сборка для production
npm run build
```

## Основные функции

### MobX Store

Приложение использует три стора:

- **contactsStore** - список контактов и групп, состояние загрузки и ошибки, метод `load()`
- **contactsFilterStore** - фильтр по имени и по группе, метод `setFilter()`
- **favoritesStore** - массив ID избранных контактов, методы `addToFavorites()` и `removeFromFavorites()`

### Действия сторов

#### contactsStore
- `load()` - загрузка контактов и групп с `/contact.json` и `/groups.json`

#### contactsFilterStore
- `setFilter({ name?, groupId? })` - установка фильтра поиска

#### favoritesStore
- `addToFavorites(id)` - добавление в избранное
- `removeFromFavorites(id)` - удаление из избранного

### Компоненты

Страницы обёрнуты в `observer()` из `mobx-react-lite`, поэтому при изменении observable-полей сторов компоненты перерисовываются автоматически.

## Особенности реализации

1. **Загрузка данных**
   - При старте приложения вызывается `rootStore.contacts.load()`
   - Данные загружаются из статических JSON в `public/`

2. **Фильтрация контактов**
   - Фильтр по имени (поиск)
   - Фильтр по группе
   - Фильтры хранятся в `contactsFilterStore`

3. **Избранное**
   - Состояние избранного синхронизировано между всеми страницами
   - Добавление/удаление из избранного работает глобально

4. **Роутинг**
   - Используется React Router для навигации
   - Все страницы доступны через навигационное меню

## Преимущества текущей реализации

✅ Единый источник данных  
✅ Реактивные обновления без лишнего кода  
✅ Отладка с MobX DevTools  
✅ Масштабируемая архитектура  
✅ Разделение ответственности (сторы)  
✅ Переиспользуемые компоненты с observer  
✅ Централизованная загрузка и обработка ошибок  
